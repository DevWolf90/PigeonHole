<div data-controller="search-users" class="container mt-4">
  <%= simple_form_for [@pigeon], data: {search_users_target: "form"} do |f| %>
    <%= f.input :link_to_content, type: :string%>
    <%= f.input :title, type: :string %>
    <%= f.input :description, type: :string, label: 'Write your message here' %>
    <%= f.input :media_type, collection: ["article", "book", "movie", "playlist", "podcast", "song", "video", "other"] %>
    <%= f.input :tags, as: :check_boxes, collection: @alltags, label: "Select category" %>
      <div id="custom-tags">
    <%= f.input :custom_tags, as: :string, input_html: { placeholder: "Enter custom tags" } %>
      </div>
    <%= f.submit "Send Pigeon", class: "btn btn-primary", style: "background-color: black" %>
    <% end %>
    <%#= f.text_field :query,
                     class: "form-control",
                     placeholder: "Send to",
                     value: params[:query],
                     data: {search_users_target: "input"} %>
</div>


<script>
$(document).ready(function() {
  $('#pigeon_tags').change(function() {
    if ($(this).find("input[value='Other']").is(":checked")) {
      $('#custom-tags').append('<input type="text" name="pigeon[custom_tags][]" placeholder="Enter custom tag">');
    } else {
      $('#custom-tags input[type="text"]').remove();
    }
  });
});
</script>
